<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHOPEE + TELEGRAM LOGGER üî•</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #ee4d2d, #ff7337); color: white; min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: rgba(0,0,0,0.7); border-radius: 20px; padding: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.5); }
        h1 { text-align: center; margin-bottom: 20px; font-size: 2.5em; text-shadow: 3px 3px 5px black; }
        .telegram-panel { background: rgba(29,161,242,0.2); border: 2px solid #1da1f2; border-radius: 10px; padding: 15px; margin: 15px 0; }
        .btn { display: inline-block; background: #00ff88; color: black; padding: 12px 25px; border-radius: 8px; text-decoration: none; font-weight: bold; margin: 8px; transition: 0.3s; border: none; cursor: pointer; }
        .btn:hover { background: #00cc66; transform: scale(1.05); }
        .btn-telegram { background: #1da1f2; color: white; }
        iframe { width: 100%; height: 500px; border: 3px solid #00ff88; border-radius: 10px; margin-top: 20px; background: white; }
        .log { font-family: monospace; background: black; color: #00ff88; padding: 10px; border-radius: 5px; margin-top: 10px; max-height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõí SHOPEE + TELEGRAM LOGGER üî•</h1>
        
        <div class="telegram-panel">
            <h3>üì° TELEGRAM CONNECTED ‚úÖ</h3>
            <p>Bot Token: <code>8455080107:AAFh1AFJ1YmONMe5kpqNstPFuZpn4NXzr18</code></p>
            <p>Chat ID: <code>8313500840</code></p>
            <button class="btn btn-telegram" onclick="testTelegram()">üîç TEST KIRIM KE TELEGRAM</button>
            <span id="telegramStatus"></span>
        </div>
        
        <button class="btn" onclick="loadShopee()">üî• LOAD SHOPEE</button>
        <button class="btn" onclick="monitorWhiteScreen()">üëÅÔ∏è MONITOR WHITE SCREEN</button>
        <button class="btn" onclick="clearCacheAndReport()">üßπ CLEAR CACHE + REPORT</button>
        
        <div id="log-container">
            <h3>System Log:</h3>
            <div id="log" class="log"></div>
        </div>
        
        <iframe id="shopeeFrame"></iframe>
    </div>

    <script>
        // CONFIG TELEGRAM
        const BOT_TOKEN = "8455080107:AAFh1AFJ1YmONMe5kpqNstPFuZpn4NXzr18";
        const CHAT_ID = "8313500840";
        let logData = [];
        
        // Fungsi kirim ke Telegram
        async function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            const text = `üî∞ SHOPEE MONITOR üî∞\n${message}\n‚è∞ ${new Date().toLocaleString()}\nüåê ${navigator.userAgent.substring(0,50)}...`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: text,
                        parse_mode: 'HTML'
                    })
                });
                return await response.json();
            } catch (error) {
                console.error('Telegram error:', error);
                return null;
            }
        }
        
        // Fungsi tambah log
        function addLog(message, sendTelegram = false) {
            const timestamp = new Date().toLocaleTimeString();
            const logText = `[${timestamp}] ${message}`;
            logData.push(logText);
            
            const logElement = document.getElementById('log');
            if(logElement) {
                logElement.innerHTML = logData.join('<br>');
                logElement.scrollTop = logElement.scrollHeight;
            }
            
            if(sendTelegram) {
                sendToTelegram(message);
            }
            
            console.log(logText);
        }
        
        // Test Telegram
        function testTelegram() {
            addLog("üîÑ Mengirim test ke Telegram...", true);
            document.getElementById('telegramStatus').innerHTML = "‚úÖ Test terkirim!";
        }
        
        // Load Shopee dengan monitoring
        function loadShopee() {
            addLog("üîÑ Loading Shopee...", true);
            
            const timestamp = Date.now();
            const random = Math.floor(Math.random() * 1000000);
            const shopeeUrl = `https://shopee.co.id/?_t=${timestamp}_${random}&bypass=cybervoids`;
            
            const iframe = document.getElementById('shopeeFrame');
            iframe.src = shopeeUrl;
            
            // Monitor iframe loading
            iframe.onload = function() {
                addLog("‚úÖ Shopee berhasil di-load di iframe", true);
                
                // Cek apakah iframe putih
                setTimeout(() => {
                    checkIframeContent();
                }, 3000);
            };
            
            iframe.onerror = function() {
                addLog("‚ùå Error loading Shopee iframe", true);
            };
        }
        
        // Cek konten iframe
        function checkIframeContent() {
            const iframe = document.getElementById('shopeeFrame');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const bodyText = iframeDoc.body.innerText || "";
                const bodyHTML = iframeDoc.body.innerHTML || "";
                
                if(bodyText.length < 100 && bodyHTML.length < 1000) {
                    addLog("‚ö†Ô∏è DETECTED: White screen di iframe!", true);
                    sendToTelegram("üö® WHITE SCREEN DETECTED di Shopee! Body length: " + bodyText.length);
                } else {
                    addLog("‚úÖ Konten Shopee terdeteksi normal", true);
                }
            } catch(e) {
                addLog("‚ö†Ô∏è Cannot access iframe (CORS): " + e.message, true);
            }
        }
        
        // Monitor white screen
        function monitorWhiteScreen() {
            addLog("üëÅÔ∏è Memulai white screen monitoring...", true);
            
            setInterval(() => {
                checkIframeContent();
            }, 10000); // Cek setiap 10 detik
        }
        
        // Clear cache + report
        function clearCacheAndReport() {
            addLog("üßπ Membersihkan cache...", true);
            
            // Clear storage
            localStorage.clear();
            sessionStorage.clear();
            
            // Clear cookies
            document.cookie.split(";").forEach(c => {
                document.cookie = c.replace(/^ +/, "")
                    .replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
            });
            
            addLog("‚úÖ Cache cleared, reloading...", true);
            
            setTimeout(() => {
                location.reload(true);
            }, 1000);
        }
        
        // Tangkap error dari console
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            const errorMsg = `üö® JS ERROR: ${msg} at ${lineNo}:${columnNo}`;
            addLog(errorMsg, true);
            return false;
        };
        
        // Auto-start
        window.onload = function() {
            addLog("CYBER_VOIDS Shopee Monitor aktif!", true);
            addLog(`Browser: ${navigator.userAgent}`);
            addLog(`URL: ${window.location.href}`);
            
            // Kirim startup message ke Telegram
            sendToTelegram("üöÄ SHOPEE MONITOR DIMULAI\nUser Agent: " + navigator.userAgent);
        };
    </script>
</body>
</html>